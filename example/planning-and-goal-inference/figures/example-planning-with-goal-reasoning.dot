digraph {
        rankdir="LR";
        n1 [label="Start",style=filled,fillcolor=crimson,shape=Mdiamond];
        n2 [label="Check Goal",style=filled,fillcolor=gold,shape=box];
        n3 [label="I",style=filled,fillcolor=green,shape=cylinder];
        n4 [label="G",style=filled,fillcolor=green,shape=cylinder];
        n5 [label="Signatures",style=filled,fillcolor=green,shape=cylinder];
        n6 [label="O",style=filled,fillcolor=green,shape=cylinder];
        n7 [label="Query",style=filled,fillcolor=green,shape=cylinder];
        n8 [label="Query not empty?",style=filled,fillcolor=deepskyblue,shape=diamond];
        n7 [label="Query",style=filled,fillcolor=green,shape=cylinder];
        n9 [label="Goal Inference",style=filled,fillcolor=gold,shape=box];
        n11 [label="Goal found?",style=filled,fillcolor=deepskyblue,shape=diamond];
        n12 [label="Plan",style=filled,fillcolor=gold,shape=box];
        n13 [label="Plan",style=filled,fillcolor=green,shape=cylinder];
        n14 [label="End",style=filled,fillcolor=crimson,shape=Msquare];
        n5 -> n2 [style=dashed,label="input"];
        n6 -> n12 [style=dashed,label="input"];
        n6 -> n2 [style=dashed,label="input"];
        n9 -> n11 [label="next"];
        n9 -> n4 [style=dashed,label="output"];
        n8 -> n9 [label="true"];
        n8 -> n14 [label="next"];
        n12 -> n14 [label="next"];
        n12 -> n13 [style=dashed,label="output"];
        n7 -> n8 [style=dashed,label="uses"];
        n4 -> n11 [style=dashed,label="uses"];  
        n7 -> n9 [style=dashed,label="input"];
        n11 -> n12 [label="true"];
        n11 -> n14 [label="next"];
        n1 -> n2 [label="next"];
        n2 -> n8 [label="next"];
        n2 -> n7 [style=dashed,label="output"];
        n4 -> n9 [style=dashed,label="input"];
        n4 -> n12 [style=dashed,label="input"];
        n4 -> n2 [style=dashed,label="input"];
        n3 -> n12 [style=dashed,label="input"];
        n3 -> n2 [style=dashed,label="input"];
}
